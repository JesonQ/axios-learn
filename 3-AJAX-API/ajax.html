<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>发送AJAX请求</title>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <h2 class="page-header">AJAX API</h2>
        <button id="btn" class="btn btn-primary">发送ajax GET请求</button>
        <button id="btn2" class="btn btn-primary">发送ajax POST请求</button>
        <button id="btn3" class="btn btn-primary">发送ajax 超时请求</button>
        <button id="quxiao" class="btn btn-danger">取消</button>
    </div>
</body>
<script>
    // 获取按钮
    let btns = document.querySelectorAll("button");
    // 绑定事件
    btns[0].onclick = function (){
        // 1 创建实例
        let xhr = new XMLHttpRequest();
        // 设置响应格式
        xhr.responseType = "json"
        // 2 绑定事件
        xhr.onreadystatechange = function (){
            if(xhr.readyState === 4){
                if(xhr.status === 200){
                    // 返回的数据
                    // console.log(xhr.responseText)
                    console.log(xhr.response)
                    // 状态字符串
                    console.log(xhr.statusText)
                    // 获取所有的响应头
                    console.log(xhr.getAllResponseHeaders())
                    // 获取某个响应头
                    console.log(xhr.getResponseHeader("date"))
                }
            }
        }
        // 3 初始化
        xhr.open("get","/server?a=100&b=200")
        // 4 发送
        xhr.send()
    }

</script>

<script>

</script>


</html>